  <!-- 右：信息（只替换这段 aside，其它不动） -->
  <aside>
    {% assign currency = page.currency | default: site.default_currency | default: 'GBP' %}
    {% capture currency_symbol %}{% case currency %}{% when 'GBP' %}£{% when 'USD' %}${% when 'EUR' %}€{% else %}{{ currency }}{% endcase %}{% endcapture %}

    <!-- 1) 标题 -->
    <h1 class="fz-title">{{ page.title }}</h1>

    <!-- 2) 价格 + 3) 税 -->
    {% if page.price %}
      <p class="fz-price-line">{{ currency_symbol | strip }}{{ page.price }}</p>
      <p class="fz-tax">Taxes included.</p>
    {% endif %}

    <!-- 4) Size：A5 / A4（价格下面、按钮上面） -->
    <div class="fz-field">
      <div class="fz-field__label">Size</div>
      <div class="fz-pills" id="fz-size-pills">
        <input class="fz-pill-input" type="radio" name="size" id="size-a5" value="A5" checked>
        <label class="fz-pill" for="size-a5">A5</label>
        <input class="fz-pill-input" type="radio" name="size" id="size-a4" value="A4">
        <label class="fz-pill" for="size-a4">A4</label>
      </div>
    </div>

    <!-- 5) PayPal（上） -->
    <div class="fz-buy">
      {% if site.paypal_business_id and page.price %}
      <form id="fz-paypal-form" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" style="width:100%">
        <input type="hidden" name="cmd" value="_xclick">
        <input type="hidden" name="business" value="{{ site.paypal_business_id }}">
        <input type="hidden" id="pp_item_name" name="item_name" value="{{ page.title }}{% if page.sku %} ({{ page.sku }}){% endif %}">
        <input type="hidden" name="amount" value="{{ page.price }}">
        <input type="hidden" name="currency_code" value="{{ currency }}">
        <button type="submit" class="fz-btn fz-btn--primary" style="width:100%">Pay via PayPal</button>
      </form>
      {% else %}
      <a class="fz-btn fz-btn--primary" href="https://www.paypal.com" target="_blank" rel="noopener" style="width:100%">Pay via PayPal</a>
      {% endif %}

      <!-- 6) Add to Cart（下，等宽） -->
      <button class="fz-btn js-add-to-cart"
        style="width:100%"
        data-sku="{{ page.sku | default: page.slug | default: page.title | slugify }}"
        data-title="{{ page.title | escape }}"
        data-price="{{ page.price | default: 0 }}"
        data-currency="{{ currency | escape }}"
        data-image="{{ hero_src | default: '' }}"
        data-option-name="Size"
        data-option-input="size"
      >Add to Cart</button>
    </div>

    <!-- 7) 作品介绍：优先 front matter 的 description；否则从正文里自动剔除误贴的 '--- ... ---' 再显示 -->
    {% assign body = content | strip %}
    {% if page.description %}
      <div class="fz-prop" style="margin-top:14px;">{{ page.description }}</div>
    {% elsif body != '' %}
      {%- comment -%}
        如果正文里误贴了第二个 front matter（形如：--- layout: ... ---），把它剔除，只拿最后一段文字。
      {%- endcomment -%}
      {% if body contains '---' and body contains 'layout:' %}
        {% assign body = body | split: '---' | last | strip %}
      {% endif %}
      {% if body != '' %}
        <div class="fz-prop" style="margin-top:14px;">{{ body }}</div>
      {% endif %}
    {% endif %}

    <!-- 让 PayPal item_name 带上所选尺寸（保持你的既有逻辑） -->
    <script>
      (function(){
        var el=document.getElementById('pp_item_name'); if(!el) return;
        var base="{{ page.title | escape }}{% if page.sku %} ({{ page.sku }}){% endif %}";
        function val(){ var c=document.querySelector('input[name="size"]:checked'); return c?c.value:''; }
        function update(){ el.value = val()? base + " - " + val() : base; }
        document.getElementById('fz-size-pills')?.addEventListener('change', update);
        update();
      })();
    </script>
  </aside>
