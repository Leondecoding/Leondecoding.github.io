---
layout: default
---

<style>
/* 仅此页：保证左图右信息；不动你现有的右栏样式 */
.fz-product{max-width:1100px;margin:32px auto;display:grid;grid-template-columns:1.1fr .9fr;gap:36px}
@media (max-width:900px){.fz-product{grid-template-columns:1fr;gap:22px}}
.fz-hero{border:1px solid #eee;background:#fafafa;border-radius:10px;overflow:hidden}
.fz-hero img{width:100%;height:auto;display:block}
.fz-thumbs{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
.fz-thumbs img{width:80px;height:80px;object-fit:cover;border:1px solid #eee;border-radius:6px;cursor:pointer}
</style>

{% assign slug = page.slug | default: page.title | slugify %}

<main class="fz-product">
  <!-- 左：主图 + 缩略图 -->
  <section>
    <div class="fz-hero">
      <img id="fz-hero-img" class="fz-autoimg"
           alt="{{ page.title }}"
           src="https://via.placeholder.com/900x900?text=Loading"
           data-candidates='[
             "{{ page.image }}",
             "{{ page.featured_image }}",
             "{{ page.cover }}",
             "{{ page.hero }}",
             "{{ page.thumbnail }}",
             "{{ page.thumb }}",
             "{{ page.picture }}",
             "{{ page.photo }}",
             {% if page.images %}"{{ page.images | first }}",{% endif %}
             {% if page.photos %}"{{ page.photos  | first }}",{% endif %}
             "/assets/images/originals/{{ slug }}.jpg",
             "/assets/images/originals/{{ slug }}.jpeg",
             "/assets/images/originals/{{ slug }}.png",
             "/assets/images/originals/{{ slug }}.webp",
             "/assets/images/originals/{{ slug }}/hero.jpg",
             "/assets/images/originals/{{ slug }}/cover.jpg"
           ]'>
    </div>

    {% if page.images and page.images.size > 1 %}
      <div class="fz-thumbs" id="fz-thumbs">
        {% for p in page.images %}
          <img src="{{ p | relative_url }}" alt="{{ page.title }} thumb {{ forloop.index }}"
               data-hero="{{ p | relative_url }}"
               onerror="this.onerror=null;this.style.display='none';">
        {% endfor %}
      </div>
    {% endif %}
  </section>

  <!-- 右：信息（保持你当前顺序与样式，不再赘述） -->
  <aside>
    {{ content }}
  </aside>
</main>

<!-- 仅本页：自动加载候选主图 + 缩略图切换 -->
<script>
(function(){
  const base='{{ "" | relative_url }}';
  const abs = s => /^https?:\/\//.test(s) || s.startsWith('data:');
  function normalize(p){
    if(!p) return null;
    p = String(p).trim();
    if(!p) return null;
    if(abs(p)) return p;
    if(!p.startsWith('/')) p = '/' + p;
    return base + p;
  }

  // 自动主图
  const hero = document.getElementById('fz-hero-img');
  if(hero){
    let list=[];
    try{ list = JSON.parse(hero.getAttribute('data-candidates')||'[]').filter(Boolean); }catch(e){}
    let i=-1, tried=new Set();
    function next(){
      i++;
      while(i<list.length && tried.has(list[i])) i++;
      if(i>=list.length){ hero.src='https://via.placeholder.com/900x900?text=Artwork'; return; }
      tried.add(list[i]);
      const src = normalize(list[i]);
      if(src){ hero.src = src; } else { next(); }
    }
    hero.addEventListener('error', next);
    next();
  }

  // 点击缩略图切换主图（沿用你已有结构）
  const thumbs = document.getElementById('fz-thumbs');
  thumbs && hero && thumbs.addEventListener('click', e=>{
    const t = e.target; if(t && t.dataset.hero){ hero.src = t.dataset.hero; }
  });
})();
</script>
