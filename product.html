<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>View â€” FZ Studio</title><link rel="stylesheet" href="./styles.css"/></head>
<body><header class="topbar">
  <div class="container row a-center j-between">
    <a class="logo" href="./index.html" aria-label="FZ Studio">
      <img src="./assets/images/logo.jpg" alt="FZ Studio logo" />
    </a>
    <nav class="nav row a-center">
      <a href="./index.html" data-nav="home">Home</a>
      <a href="./our-story.html" data-nav="ourstory">Our Story</a>
      <a href="./blog.html" data-nav="blog">Blog</a>
      <a href="./original-art.html" data-nav="original">Original Art</a>
      <a href="./art-prints.html" data-nav="prints">Art Prints</a>
      <a href="./greeting-cards.html" data-nav="cards">Greeting Cards</a>
      <a href="./contact.html" data-nav="contact">Contact</a>
    </nav>
    <div class="right">
      <a href="#" aria-label="Login">Login</a>
      <button id="cartBtn" class="icon-btn badge" data-count="0" title="Cart" aria-label="Cart">
        <svg viewBox="0 0 24 24"><path d="M3 3h2l.6 3M7 13h10l3-8H6l1 8zm-1 0l-2 8m14-8l2 8M10 21a1 1 0 110-2 1 1 0 010 2m8 0a1 1 0 110-2 1 1 0 010 2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
    </div>
  </div>
</header>
<main>
  <section class="product">
    <div class="stage">
      <button class="pnav prev" id="navPrev" aria-label="Previous">
        <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
      <img id="prodImg" alt="Artwork"/>
      <button class="pnav next" id="navNext" aria-label="Next">
        <svg viewBox="0 0 24 24"><path d="M9 6l6 6-6 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
      <div id="thumbs" class="thumbs"></div>
    </div>
    <aside class="meta">
      <h1 id="prodTitle">Title</h1>
      <div class="price" id="prodPrice"></div>
      <div class="size" id="prodSize"></div>
      <p id="prodDesc"></p>
      <div class="actions">
        <button id="btnAdd" class="btn">Add to Cart</button>
        <a id="btnBuy" class="btn link" target="_blank" rel="noopener">Buy with PayPal</a>
      </div>
    </aside>
  </section>
</main>
<footer class="footer"><div class="container">&copy; <span id="year"></span> FZ Studio</div></footer>
<script src="./app.js"></script>
<script>
(async function(){
  const url=new URL(location.href);
  const cat=url.searchParams.get('cat');
  const id=url.searchParams.get('id');
  const file=cat==='original'?'./data/original_art.json':(cat==='prints'?'./data/art_prints.json':'./data/greeting_cards.json');
  const list=await fetch(file,{cache:'no-store'}).then(r=>r.json());
  let idx=list.findIndex(x=>x.id===id); if(idx<0) idx=0;

  function show(i){
    const item=list[i];
    const primary=item.src||item.thumb||(item.images&&item.images[0]);
    document.getElementById('prodImg').src=primary;
    document.getElementById('prodTitle').textContent=item.title;
    document.getElementById('prodPrice').textContent=(item.currency||'GBP')+' '+Number(item.price).toFixed(2);
    document.getElementById('prodSize').textContent=item.size||'';
    document.getElementById('prodDesc').textContent=item.description||'';
    // thumbs
    const t=document.getElementById('thumbs'); t.innerHTML='';
    (item.images||[primary]).forEach(src=>{ const im=new Image(); im.src=src; im.alt=item.title; im.onclick=()=>document.getElementById('prodImg').src=src; t.appendChild(im); });
    // actions
    document.getElementById('btnAdd').onclick=()=>addToCart({id:item.id,title:item.title,price:Number(item.price),src:primary,qty:1});
    document.getElementById('btnBuy').onclick=(e)=>{ const u=new URL('https://www.paypal.com/cgi-bin/webscr'); u.searchParams.set('cmd','_xclick'); u.searchParams.set('business', BUSINESS_EMAIL); u.searchParams.set('item_name', item.title); u.searchParams.set('amount', Number(item.price).toFixed(2)); u.searchParams.set('currency_code', item.currency || 'GBP'); e.currentTarget.href=u.toString(); };
  }
  function next(){ idx=(idx+1)%list.length; show(idx); history.replaceState(null,'','./product.html?cat='+cat+'&id='+list[idx].id); }
  function prev(){ idx=(idx-1+list.length)%list.length; show(idx); history.replaceState(null,'','./product.html?cat='+cat+'&id='+list[idx].id); }
  document.getElementById('navNext').onclick=next;
  document.getElementById('navPrev').onclick=prev;
  document.addEventListener('keydown',(e)=>{ if(e.key==='ArrowRight') next(); if(e.key==='ArrowLeft') prev(); });

  show(idx);
})();
</script>
</body></html>